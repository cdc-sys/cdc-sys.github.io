<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Nunito:ital,wght@0,200..1000;1,200..1000&display=swap"
    rel="stylesheet">

<canvas id="bg"></canvas>
<h1 id="main" class="nunito-bold" onclick="onMain();">404</h1>
<div id="links" class="nunito-bold">
    <a>Not found.</a>
    <bar></bar>
    <a>Home</a>
</div>
<style>
    #bg {
        position: absolute;
        transform: scale(3);
        opacity: 0.03;
    }

    .nunito-bold {
        font-family: "Nunito", sans-serif;
        font-optical-sizing: auto;
        font-weight: bold;
        font-style: normal;
    }

    p {
        font-size: 3.2rem;
    }

    #main {
        cursor: pointer;
        position: absolute;
        top: 50%;
        left: 50%;
    }

    html {
        background-color: #212129;
        overflow: hidden;
    }

    body {
        margin: 0px;
    }

    bar {
        border-style: solid;
        opacity: 0.25;
        border-width: 1px;
    }

    #links {
        color: #b6d4fc;
        display: flex;
        gap: 7px;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, calc(-50% + 30px));
    }

    h1 {
        color: #cfcfff;
        font-size: 5rem;
        text-align: center;
        margin: 0px;
    }
</style>
<script>
    function lerp(start, end, amt) {
        return (1 - amt) * start + amt * end;
    }
    function easeOutElastic(x) {
        const c4 = (2 * Math.PI) / 3;

        return x === 0
            ? 0
            : x === 1
                ? 1
                : Math.pow(2, -10 * x) * Math.sin((x * 10 - 0.75) * c4) + 1;
    }

    function drawStar(ctx, cx, cy, spikes, innerRadius, outerRadius) {
        var rot = Math.PI / 2 * 3;
        var x = cx;
        var y = cy;
        var step = Math.PI / spikes;

        ctx.beginPath();
        ctx.moveTo(cx + Math.cos(rot), cy - outerRadius)
        for (i = 0; i < spikes; i++) {
            x = cx + Math.cos(rot) * outerRadius;
            y = cy + Math.sin(rot) * outerRadius;
            ctx.lineTo(x, y)
            rot += step

            x = cx + Math.cos(rot) * innerRadius;
            y = cy + Math.sin(rot) * innerRadius;
            ctx.lineTo(x, y)
            rot += step
        }
        ctx.lineTo(cx, cy - outerRadius);
        ctx.closePath();
        ctx.lineWidth = 5;
        ctx.fillStyle = '#cfcfff';
        ctx.fill();
    }

    // background
    let CANVAS = document.getElementById("bg");
    let CONTEXT = CANVAS.getContext('2d');
    var scroll = 0;
    function bg_update() {
        var speed = 0.1;
        scroll += speed;
        var separation = 30;
        CANVAS.width = window.innerWidth / 2;
        CANVAS.height = window.innerHeight / 2;
        for (var _i = -1; _i < CANVAS.height / separation + 1; _i++) {
            for (var i = -1; i < CANVAS.width / separation + 1; i++) {
                drawStar(CONTEXT, i * separation + scroll, _i * separation + scroll, 5, 4, 7.5);
            }
        }
        if (scroll > separation) scroll = speed;
    }


    let animation_progress = 0;
    let siner = 0;
    let y_off = 0;
    let y_offt = 0;
    let toggled = false;
    function update() {
        var sin1 = Math.sin(siner * 0.08);
        y_off = lerp(y_off, y_offt, 0.05);
        var sin2 = Math.sin(siner * 0.05);
        var thename = document.getElementById("main");
        animation_progress += 0.002;
        if (animation_progress > 1) {
            animation_progress = 1;
        }
        if (animation_progress > 0.4) {
            siner = siner + 0.2;
        }
        var mult = easeOutElastic(animation_progress);
        thename.style = `opacity: ${mult};transform: translate(calc(-50% + ${12 * sin1 * main_siner}px),calc(${-100 + mult * 100 - 50}% + ${12 * sin2 * main_siner + y_off}px)) scaleX(${0.5 + mult * 0.5}) scaleY(${1.25 - mult * 0.25});`;

        if (toggled) {
            links_y_t = 0;
            links_opacity_t = 1;
            main_siner_t = 0
        } else {
            links_y_t = -30;
            links_opacity_t = 0;
            main_siner_t = 1;
        }

        var a = document.getElementById("links");
        links_y = lerp(links_y, links_y_t, 0.05);
        main_siner = lerp(main_siner, main_siner_t, 0.02);
        links_opacity = lerp(links_opacity, links_opacity_t, 0.1);
        if (links_opacity > 0.1) a.style = `opacity: ${links_opacity}; transform: translate(-50%,calc(-50% + 30px + ${links_y}px));`
        else a.style = "display: none;"
    }
    let links_y = 0;
    let links_y_t = 0;
    let links_opacity = 0;
    let links_opacity_t = 0;
    let main_siner = 1;
    let main_siner_t = 1;
    function onMain() {
        toggled = !toggled;
        y_offt = -50 * toggled;

    }
    setInterval(bg_update, 1 / 60 / 1000)
    setInterval(update, 1 / 60 / 1000)
</script>